# |{^if: Компас и мелочи

# Disclaimer

Strong opinions weakly held

# Что особенного?

- HTML
- CSS (Less)
- TypeScript
- React
- MobX

# А на беке?

- .Net Core Web API
- OpenID Connect Server Flow
- Говорят у нас REST, но я сам не видел
- Всё взаимодействие через [NSwag](https://github.com/RicoSuter/NSwag) клиент

# Приз ~~зрительских~~ моих симпатий

[swr](https://swr.vercel.app/)

- Eventual consistency (`stale-while-revalidate`)
- Кеширование и ревалидация
- Ретраи ошибок
- Оптимистичные обновления
- Бесконечный скролл
- Поддержка [Suspense](https://reactjs.org/docs/concurrent-mode-suspense.html)

# Где всё это храним?

- Легаси в Redux
- Локальное в `useState` или MobX
- Бизнес лапша в MobX State Tree
- Всё незименное прямо в кеше `swr`

# Мобилка

- У нас [PWA](https://web.dev/pwa-checklist/),
  правда без полноценной offline работы
- Дизайним, чтобы удобно было пользоваться на мобилке
- Умеем устанавливаться, мечтаем попасть в Store'ы

# Проблемы

- Библиотека контролов чуть более чем бесполезна на мобилке
- Модалка, хинт, попап, дропдаун, тосты и даже кнопка не для мобилки
- Некоторые контролы даже не резиновые
- Кастомизации в библиотекe нет :'(

# Как с этим жить

- "Легкая" аморфная кнопка с удобной тач областью
  `const Clickable = (ps) => ps.href ? <a {...ps} /> : <button {...ps} />`
- Свои меню и попапы, которые адаптируются в "модалку" на мобилке
- Навигация и табы, которые переезжают вниз на мобилке
- Используем нативные контролы (date), прописываем `inputMode`
- Свой адаптивный сайдпейдж `@reach-ui/modal`
- Свои тосты с действиями
- `safe-area-inset-*` для не-прямоугольных экранов

# a11y

Это не только про скринридеры

# В вебе уже всё не так плохо

"No ARIA is better than Bad ARIA" [почитать](https://www.w3.org/TR/wai-aria-practices-1.2/)

# Навигация

- Добавляет в историю — `<a href="/..." />`
- Выталкивает из истории — `<button />`

# Фокус

- По умолчанию уже всё ок
- Не нравятся стили — изменяй, не отключай
- Не нравится фокус с клика — `:focus-visible`
- Не пиши руками отслеживание состояния, используй полифил

# Фокус 2

- Модальные слои зацикливают в себе, и **восстанавливают** на закрытие
- Хорошо сделано в [Reach UI](https://reach.tech/)

# Фокус 3

- В попапах можно перемещаться стрелочками по вариантам,
  перемещение честно передаёт фокус
- При закрытии — фокус восстанавливается
- Таб из списка не должен отправлять в небытие

# Фокус 4

- По группе однородных элементов прикольно ходить стрелочками
- Первый элемент группы ловит фокус, по табу — отправляет дальше
- Можно использовать в списках, табах, карточках и т.д.

# Фокус 5

- Если что-то не видно — при фокусе должно быть видно
- Чаще всего просто работает, для скролла есть: `scroll-margin-*`
- Для вложенных вещей — `:focus-inside`

# ~~Фокус~~ хватит фокуса

- Куча интерактивных элементов уже есть в html
- Honourable mentions:
  - `a`
  - `form`
  - `button`
  - `select`
  - `input` на все случаи жизни (+ `inputMode` для мобилки)
  - `label`
  - `details`

# Другие аспекты

- Цвета, размеры и контрастность
- Скроллящиеся элементы
- Браузерная история
- Бережливое отношение к данным
- Очевидность происходящего и отзывчивость

# Call-to-action

Если не можете ничего дать людям с ограниченными возможностями,
хотя бы ничего не отбирайте у остальных
